# 🧠 C++ make_shared vs shared_ptr(new T) 차이 설명 가능 면접 질문 리스트

## ✅ 기본 개념

1. std::make_shared란 무엇인가요?
2. make_shared와 shared_ptr(new T)의 가장 큰 차이는 무엇인가요?

## ✅ 예외 안전성 (핵심)

1. make_shared가 예외 안전한 이유는 무엇인가요?
2. shared_ptr(new T)에서 발생할 수 있는 예외 안전성 문제는 무엇인가요?

## ✅ 메모리 할당 관점

1. make_shared는 메모리를 어떻게 할당하나요?
2. shared_ptr(new T)는 메모리를 어떻게 할당하나요?
3. 메모리 할당 횟수의 차이는 성능에 어떤 영향을 주나요?

## ✅ Control Block 구조

1. make_shared에서 control block은 어디에 저장되나요?
2. shared_ptr(new T)에서 control block은 어디에 저장되나요?

## ✅ weak_ptr 수명 연계

1. make_shared를 사용하면 weak_ptr 수명에 어떤 영향이 있나요?
2. weak_ptr이 남아있을 때 객체가 해제되지 않는 이유는 무엇인가요?

## ✅ 성능 비교

1. make_shared가 성능상 유리한 이유는 무엇인가요?
2. 어떤 경우에 shared_ptr(new T)가 더 나을 수 있나요?

## ✅ 사용 판단

1. 언제 make_shared를 사용해야 하나요?
2. 언제 shared_ptr(new T)를 사용해야 하나요?

## ✅ 요약 질문

1. make_shared와 shared_ptr(new T)의 차이를 한 문장으로 요약해보세요.

<details>
<summary>GPT 1줄 답변</summary>
<div markdown="1">

## 📝 모범 답변

### ✅ 기본 개념

1. shared_ptr를 안전하고 효율적으로 생성하는 팩토리 함수입니다.
2. make_shared는 한 번의 할당, shared_ptr(new T)는 두 번의 할당입니다.

### ✅ 예외 안전성 (핵심)

3. 객체 생성과 shared_ptr 생성이 원자적으로 수행되기 때문입니다.
4. new T 성공 후 shared_ptr 생성 전 예외 발생 시 메모리 누수가 발생합니다.

### ✅ 메모리 할당 관점

5. 객체와 control block을 하나의 메모리 블록에 할당합니다.
6. 객체와 control block을 각각 별도로 할당합니다.
7. 할당 횟수가 적을수록 성능이 향상되고 메모리 단편화가 줄어듭니다.

### ✅ Control Block 구조

8. 객체와 같은 메모리 블록에 인접하게 저장됩니다.
9. 별도의 메모리 블록에 저장됩니다.

### ✅ weak_ptr 수명 연계

10. 객체와 control block이 같은 블록이라 weak_ptr이 남아있으면 객체도 해제되지 않습니다.
11. control block이 해제되지 않아 객체 메모리도 함께 유지되기 때문입니다.

### ✅ 성능 비교

12. 메모리 할당 횟수 감소, 캐시 효율 향상, 예외 안전성 때문입니다.
13. 커스텀 deleter나 weak_ptr 수명 문제를 피해야 할 때입니다.

### ✅ 사용 판단

14. 일반적인 경우에 make_shared를 우선 사용합니다.
15. 커스텀 deleter, weak_ptr 수명 문제, 초기화 리스트가 필요할 때입니다.

### ✅ 요약 질문

16. make_shared는 "예외 안전하고 효율적인 shared_ptr 생성 방법"입니다.

</div>
</details>
