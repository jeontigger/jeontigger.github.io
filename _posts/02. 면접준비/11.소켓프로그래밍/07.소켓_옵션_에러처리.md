# 🧠 소켓 옵션 및 에러 처리 설명 가능 면접 질문 리스트

## ✅ 기본 개념

1. 소켓 옵션을 설정하는 이유는 무엇인가요?

    - 

2. setsockopt() 함수의 역할은 무엇인가요?

    - 

3. getsockopt() 함수의 역할은 무엇인가요?

    - 

## ✅ SO_REUSEADDR

1. SO_REUSEADDR 옵션의 역할은 무엇인가요?

    - 

2. SO_REUSEADDR을 사용하지 않으면 어떤 문제가 발생하나요?

    - 

3. SO_REUSEADDR을 설정하는 코드를 작성해보세요.

    - 

4. 언제 SO_REUSEADDR을 사용해야 하나요?

    - 

## ✅ SO_REUSEPORT

1. SO_REUSEPORT 옵션의 역할은 무엇인가요?

    - 

2. SO_REUSEADDR과 SO_REUSEPORT의 차이는 무엇인가요?

    - 

3. SO_REUSEPORT의 장점은 무엇인가요?

    - 

## ✅ SO_KEEPALIVE

1. SO_KEEPALIVE 옵션의 역할은 무엇인가요?

    - 

2. SO_KEEPALIVE를 사용하지 않으면 어떤 문제가 발생하나요?

    - 

3. SO_KEEPALIVE의 동작 방식은 무엇인가요?

    - 

## ✅ SO_LINGER

1. SO_LINGER 옵션의 역할은 무엇인가요?

    - 

2. SO_LINGER 구조체의 필드는 무엇인가요?

    - 

3. SO_LINGER를 사용하는 이유는 무엇인가요?

    - 

## ✅ TCP_NODELAY

1. TCP_NODELAY 옵션의 역할은 무엇인가요?

    - 

2. Nagle 알고리즘이란 무엇인가요?

    - 

3. 언제 TCP_NODELAY를 사용해야 하나요?

    - 

## ✅ 소켓 버퍼 크기

1. SO_RCVBUF와 SO_SNDBUF 옵션의 역할은 무엇인가요?

    - 

2. 버퍼 크기를 조정하는 이유는 무엇인가요?

    - 

3. 버퍼 크기를 너무 크게 설정하면 어떻게 되나요?

    - 

## ✅ 에러 처리 기본

1. 소켓 함수들의 에러 반환 패턴은 무엇인가요?

    - 

2. errno를 확인하는 방법은 무엇인가요?

    - 

3. 주요 소켓 에러 코드들은 무엇인가요?

    - 

## ✅ 주요 에러 코드

1. EAGAIN / EWOULDBLOCK은 언제 발생하나요?

    - 

2. ECONNRESET은 언제 발생하나요?

    - 

3. EPIPE는 언제 발생하나요?

    - 

4. ETIMEDOUT은 언제 발생하나요?

    - 

5. EINTR은 언제 발생하나요?

    - 

## ✅ 연결 끊김 감지

1. 연결이 끊어졌는지 어떻게 감지하나요?

    - 

2. recv()가 0을 반환하는 경우는 무엇을 의미하나요?

    - 

3. send()가 실패하는 경우는 언제인가요?

    - 

## ✅ 타임아웃 설정

1. SO_RCVTIMEO 옵션의 역할은 무엇인가요?

    - 

2. SO_SNDTIMEO 옵션의 역할은 무엇인가요?

    - 

3. 타임아웃을 설정하는 코드를 작성해보세요.

    - 

4. 타임아웃을 설정하지 않으면 어떻게 되나요?

    - 

## ✅ 부분 송수신 처리

1. 부분 송신(partial send)이란 무엇인가요?

    - 

2. 부분 송신을 처리하는 방법은 무엇인가요?

    - 

3. 부분 수신(partial recv)이란 무엇인가요?

    - 

4. 부분 수신을 처리하는 방법은 무엇인가요?

    - 

## ✅ 에러 복구 전략

1. EAGAIN을 받았을 때 어떻게 처리하나요?

    - 

2. ECONNRESET을 받았을 때 어떻게 처리하나요?

    - 

3. EINTR을 받았을 때 어떻게 처리하나요?

    - 

## ✅ 실무 / 설계 판단

1. 가장 중요한 소켓 옵션은 무엇인가요?

    - 

2. 에러 처리를 할 때 가장 주의해야 할 점은 무엇인가요?

    - 

3. 실무에서 자주 발생하는 소켓 에러는 무엇인가요?

    - 

## ✅ 요약 질문

1. 소켓 옵션과 에러 처리의 중요성을 한 문장으로 요약해보세요.

    - 

<details>
<summary>GPT 1줄 답변</summary>
<div markdown="1">

## 📝 모범 답변

### ✅ 기본 개념

1. 소켓의 동작 방식을 제어하고 최적화하기 위해서입니다.
2. 소켓 옵션을 설정하는 함수입니다.
3. 소켓 옵션 값을 가져오는 함수입니다.

### ✅ SO_REUSEADDR

1. TIME_WAIT 상태의 소켓이 사용한 주소를 재사용할 수 있게 합니다.
2. 서버 재시작 시 "Address already in use" 에러가 발생합니다.
3. int opt = 1; setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &opt, sizeof(opt));
4. 서버를 재시작할 때마다 사용해야 합니다.

### ✅ SO_REUSEPORT

1. 여러 소켓이 같은 포트를 바인딩할 수 있게 합니다.
2. SO_REUSEADDR은 주소 재사용, SO_REUSEPORT는 포트 재사용입니다.
3. 로드 밸런싱과 고가용성을 제공합니다.

### ✅ SO_KEEPALIVE

1. 유휴 연결에서 주기적으로 패킷을 보내 연결 상태를 확인합니다.
2. 끊어진 연결을 감지하지 못해 리소스가 낭비될 수 있습니다.
3. 주기적으로 keepalive 패킷을 보내 응답이 없으면 연결을 끊습니다.

### ✅ SO_LINGER

1. close() 호출 시 데이터 전송 완료를 기다리는 방식을 제어합니다.
2. l_onoff(활성화 여부), l_linger(대기 시간) 필드가 있습니다.
3. 모든 데이터가 전송될 때까지 기다리거나 즉시 종료하기 위해서입니다.

### ✅ TCP_NODELAY

1. Nagle 알고리즘을 비활성화하여 지연을 줄입니다.
2. 작은 패킷을 버퍼링하여 큰 패킷으로 묶어 전송하는 알고리즘입니다.
3. 실시간성이 중요한 애플리케이션에서 사용합니다.

### ✅ 소켓 버퍼 크기

1. 수신 버퍼와 송신 버퍼의 크기를 설정합니다.
2. 대역폭과 지연 시간의 트레이드오프를 조절하기 위해서입니다.
3. 메모리 사용량이 증가하고, 지연이 발생할 수 있습니다.

### ✅ 에러 처리 기본

1. 대부분 -1을 반환하고 errno에 에러 코드를 설정합니다.
2. errno 변수를 확인하거나, perror(), strerror() 함수를 사용합니다.
3. EAGAIN, ECONNRESET, EPIPE, ETIMEDOUT, EINTR 등이 있습니다.

### ✅ 주요 에러 코드

1. 논블로킹 소켓에서 데이터가 없거나 버퍼가 가득 찼을 때 발생합니다.
2. 상대방이 연결을 강제로 끊었을 때 발생합니다.
3. 파이프나 소켓이 닫혔는데 쓰기를 시도할 때 발생합니다.
4. 연결이나 작업이 타임아웃되었을 때 발생합니다.
5. 시스템 콜이 시그널에 의해 중단되었을 때 발생합니다.

### ✅ 연결 끊김 감지

1. recv()가 0을 반환하거나, send()가 EPIPE/ECONNRESET을 반환할 때 감지합니다.
2. 상대방이 연결을 정상적으로 종료했음을 의미합니다.
3. 연결이 끊어졌거나 버퍼가 가득 찼을 때 실패합니다.

### ✅ 타임아웃 설정

1. 수신 작업의 타임아웃을 설정합니다.
2. 송신 작업의 타임아웃을 설정합니다.
3. struct timeval tv = {5, 0}; setsockopt(sockfd, SOL_SOCKET, SO_RCVTIMEO, &tv, sizeof(tv));
4. 무한정 대기하게 됩니다.

### ✅ 부분 송수신 처리

1. send()가 요청한 크기보다 적게 전송하는 경우입니다.
2. 루프를 사용하여 모든 데이터가 전송될 때까지 반복합니다.
3. recv()가 요청한 크기보다 적게 수신하는 경우입니다.
4. 루프를 사용하여 필요한 만큼 데이터를 수신합니다.

### ✅ 에러 복구 전략

1. 나중에 다시 시도하거나, select/epoll로 준비 상태를 확인합니다.
2. 연결을 정리하고 재연결을 시도합니다.
3. 작업을 다시 시도합니다.

### ✅ 실무 / 설계 판단

1. SO_REUSEADDR이 가장 중요하며, 서버 재시작에 필수입니다.
2. 모든 소켓 함수 호출 후 반환값을 확인하고 errno를 체크해야 합니다.
3. EAGAIN, ECONNRESET, EPIPE 등이 자주 발생합니다.

### ✅ 요약 질문

1. 소켓 옵션은 동작을 최적화하고, 에러 처리는 안정적인 통신을 보장하는 핵심 요소입니다.

</div>
</details>
