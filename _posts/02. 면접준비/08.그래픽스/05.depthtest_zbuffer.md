# 🧠 Depth Test / Z-Buffer 설명 가능 면접 질문 리스트

## ✅ 기본 개념

1. Depth Test란 무엇인가요?

    - 깊이 테스트입니다. 현재 그려질 픽셀과 렌더 타겟에 그려져있는 픽셀의 z값을 비교하여 그릴지 말지 결정합니다.

2. Z-Buffer란 무엇인가요?

    - 깊이 버퍼입니다. Z-buffer를 통해 depth test가 진행됩니다.

3. Depth Test와 Z-Buffer의 관계는 무엇인가요?

    - Zbuffer를 통해 Depth Test를 진행합니다.

## ✅ 동작 위치 / 파이프라인

1. Depth Test는 렌더링 파이프라인의 어느 단계에서 수행되나요?

    - OM 단계에서 실행됩니다.

2. Z-Buffer에는 어떤 값이 저장되나요?

    - near와 far 사이의 정규화 된 값이 저장됩니다.

## ✅ 비교 방식

1. Depth Test는 어떤 기준으로 픽셀을 통과/폐기하나요?

    - Depth State에 따라 다릅니다. 일반적인 경우엔 z-buffer보다 가까운 픽셀이 통과되고 먼 픽셀은 그릴 필요가 없기 때문에 폐기합니다.

2. Depth Compare 함수에는 어떤 종류가 있나요?

    - GreaterEqual, Greater, Less, LessEqual, 등이 있습니다.

## ✅ 좌표계 / 값 범위

1. Depth 값은 어느 좌표계에서 계산되나요?

    - 투영 좌표계에서 계산됩니다.

2. Near/Far Plane이 Depth 정밀도에 영향을 주는 이유는 무엇인가요?

    - near와 far가 너무 가까우면 멀리있는 물체를 그릴 수 없게되고, 너무 멀면 두 좌표의 차이가 존재해도 같은 지점이라고 계산될 수도 있습니다.

## ✅ 성능 관점

1. Early-Z란 무엇인가요?

    - z가 가까운 것 순서대로 draw를 하는 것입니다.

2. Early-Z가 성능을 향상시키는 이유는 무엇인가요?

    - z값이 멀면 그리지 않고 폐기되기 때문입니다.

## ✅ 투명도 / 특수 케이스

1. 투명 객체에서 Depth Test는 어떻게 처리되나요?

    - z값보다 가깝다면 색상을 블랜딩합니다.

2. Depth Write를 끄는 이유는 무엇인가요?

    - 

## ✅ 문제 / 한계

1. Z-Fighting이란 무엇인가요?

    - z값이 동일하게 기록되어, 그려야 할 픽셀이 어떤 것인지 gpu가 판단하지 못하는 것입니다.

2. Z-Fighting은 왜 발생하나요?

    - 완전히 같은 영역에 존재하다거나, near와 far의 거리가 너무 멀면 발생할 수 있습니다.

## ✅ 요약 질문

1. Depth Test / Z-Buffer를 한 문장으로 요약해보세요.

<details>
<summary>GPT 1줄 답변</summary>
<div markdown="1">

## ✅ 1줄 모범 답변

1. 픽셀의 깊이를 비교해 화면에 그릴지 결정하는 테스트입니다.
2. 각 픽셀의 깊이 값을 저장하는 버퍼입니다.
3. Z-Buffer의 값을 기준으로 Depth Test가 수행됩니다.

4. Output Merger 단계입니다.
5. 카메라 기준 깊이 값입니다.

6. 새 픽셀이 더 가까우면 통과합니다.
7. Less, LessEqual, Greater 등입니다.

8. Projection 이후의 Depth 값입니다.
9. Depth 값이 비선형 분포이기 때문입니다.

10. Fragment Shader 이전에 Depth Test를 수행하는 최적화입니다.
11. 불필요한 픽셀 셰이딩을 줄이기 때문입니다.

12. 보통 Depth Test는 켜고 Write는 끕니다.
13. 뒤쪽 픽셀이 가려지는 것을 막기 위해서입니다.

14. 깊이 값이 거의 같은 면이 깜빡이는 현상입니다.
15. Depth 정밀도가 부족하기 때문입니다.

16. Depth Test는 “가장 가까운 픽셀만 남기는 과정”입니다.

</div>
</details>

---

## 📝 GPT 피드백

### ✅ 기본 개념

**질문 2: Z-Buffer란 무엇인가요?**
- **현재 답변**: "깊이 버퍼입니다. Z-buffer를 통해 depth test가 진행됩니다."
- **피드백**:
  - 💡 **보완**: "각 픽셀의 깊이 값을 저장하는 버퍼입니다"
  - 현재 답변은 Z-Buffer의 용도(관계)만 설명하고 있습니다. Z-Buffer의 정의를 더 구체적으로 설명하면 좋습니다.

### ✅ 동작 위치 / 파이프라인

(정확한 답변 - 피드백 생략)

### ✅ 비교 방식

(정확한 답변 - 피드백 생략)

### ✅ 좌표계 / 값 범위

**질문 2: Near/Far Plane이 Depth 정밀도에 영향을 주는 이유는 무엇인가요?**
- **현재 답변**: "near와 far가 너무 가까우면 멀리있는 물체를 그릴 수 없게되고, 너무 멀면 두 좌표의 차이가 존재해도 같은 지점이라고 계산될 수도 있습니다."
- **피드백**:
  - ⚠️ **부정확**: 현상 설명은 맞지만, 근본 원인을 설명하지 못했습니다
  - ✅ **정확한 답변**: "Depth 값이 비선형 분포이기 때문입니다"
  - Depth 값은 projection space에서 비선형적으로 분포합니다. Near plane에 가까울수록 정밀도가 높고, far plane에 가까울수록 정밀도가 낮아집니다. 따라서 near/far 비율이 클수록 정밀도 문제가 심화됩니다.

### ✅ 성능 관점

**질문 1: Early-Z란 무엇인가요?**
- **현재 답변**: "z가 가까운 것 순서대로 draw를 하는 것입니다."
- **피드백**:
  - ❌ **오개념**: Early-Z는 그리기 순서와 관련이 없습니다
  - ✅ **정확한 답변**: "Fragment Shader 이전에 Depth Test를 수행하는 최적화입니다"
  - Early-Z는 GPU 하드웨어가 Fragment Shader 실행 전에 Depth Test를 수행하는 최적화입니다. 가까운 순서로 그리는 것은 Early-Z가 아니라 Draw Order 최적화입니다.

**질문 2: Early-Z가 성능을 향상시키는 이유는 무엇인가요?**
- **현재 답변**: "z값이 멀면 그리지 않고 폐기되기 때문입니다."
- **피드백**:
  - 💡 **보완**: "불필요한 픽셀 셰이딩을 줄이기 때문입니다"
  - 현재 답변은 맞지만, Early-Z의 핵심은 Fragment Shader(셰이딩) 실행 전에 픽셀을 폐기하여 비용이 큰 셰이딩 연산을 건너뛰는 것입니다.

### ✅ 투명도 / 특수 케이스

**질문 1: 투명 객체에서 Depth Test는 어떻게 처리되나요?**
- **현재 답변**: "z값보다 가깝다면 색상을 블랜딩합니다."
- **피드백**:
  - ⚠️ **부정확**: Depth Test와 블렌딩을 혼동했습니다
  - ✅ **정확한 답변**: "보통 Depth Test는 켜고 Write는 끕니다"
  - 투명 객체는 Depth Test는 수행하되(뒤쪽 물체를 가리기 위해), Depth Write는 끕니다(뒤에 있는 투명 객체들이 보이도록 하기 위해). 블렌딩은 별개의 과정입니다.

**질문 2: Depth Write를 끄는 이유는 무엇인가요?**
- **현재 답변**: (답변 누락)
- **피드백**:
  - ❌ **답변 필요**: 면접에서 자주 나오는 질문입니다
  - ✅ **정확한 답변**: "뒤쪽 픽셀이 가려지는 것을 막기 위해서입니다"
  - Depth Write를 끄면 Z-Buffer가 업데이트되지 않아, 같은 위치의 뒤쪽 픽셀들이 렌더링될 수 있습니다. 투명 객체나 특정 효과에서 사용됩니다.

### ✅ 문제 / 한계

**질문 1: Z-Fighting이란 무엇인가요?**
- **현재 답변**: "z값이 동일하게 기록되어, 그려야 할 픽셀이 어떤 것인지 gpu가 판단하지 못하는 것입니다."
- **피드백**:
  - ⚠️ **부정확**: "동일하게 기록"보다는 "거의 같은"이 정확합니다
  - ✅ **정확한 답변**: "깊이 값이 거의 같은 면이 깜빡이는 현상입니다"
  - Z-Fighting은 두 면의 깊이 값이 매우 유사할 때, Depth Test 결과가 프레임마다 달라지면서 깜빡이는 현상입니다.

**질문 2: Z-Fighting은 왜 발생하나요?**
- **현재 답변**: "완전히 같은 영역에 존재하다거나, near와 far의 거리가 너무 멀면 발생할 수 있습니다."
- **피드백**:
  - 💡 **보완**: "Depth 정밀도가 부족하기 때문입니다"
  - 현재 답변은 원인(같은 영역, near/far 거리)을 언급했지만, 근본 원인(Depth 정밀도 부족)을 명시하면 더 좋습니다. Depth 값의 비선형 분포와 유한한 정밀도로 인해 발생합니다.

### ✅ 요약 질문

**질문 1: Depth Test / Z-Buffer를 한 문장으로 요약해보세요.**
- **현재 답변**: (답변 누락)
- **피드백**:
  - ❌ **답변 필요**: 핵심 개념을 요약하는 중요한 질문입니다
  - ✅ **정확한 답변**: "Depth Test는 '가장 가까운 픽셀만 남기는 과정'입니다"
  - 또는 "Z-Buffer를 사용하여 가장 가까운 픽셀만 화면에 그리는 과정"이라고 설명할 수 있습니다.

### 📊 전체 평가

**강점:**
- ✅ Depth Test와 Z-Buffer의 기본 개념 이해
- ✅ Depth Test 수행 위치(OM 단계) 이해
- ✅ Z-Buffer 값 범위(정규화된 값) 이해
- ✅ Depth Compare 함수 종류 이해
- ✅ Depth 값 계산 좌표계(투영 좌표계) 이해

**개선 필요:**
- ❌ Early-Z 개념 오개념 (그리기 순서 → Fragment Shader 이전 Depth Test)
- ❌ Depth Write 비활성화 이유 답변 누락
- ❌ 요약 질문 답변 누락
- ⚠️ Near/Far Plane이 Depth 정밀도에 영향을 주는 이유 부정확 (비선형 분포 원인 미포함)
- ⚠️ 투명 객체 Depth Test 처리 부정확 (Depth Test/Write 설정과 블렌딩 혼동)
- ⚠️ Z-Fighting 정의 부정확 (동일 → 거의 같은)
- 💡 Z-Buffer 정의 보완 필요 (용도 → 정의)
- 💡 Early-Z 성능 향상 이유 보완 필요 (폐기 → 셰이딩 감소)
- 💡 Z-Fighting 발생 원인 보완 필요 (현상 → 정밀도 부족)

**우선순위:**
1. **높음**: Early-Z 개념 (오개념), Depth Write 비활성화 이유 (답변 누락), 요약 질문 (답변 누락)
2. **중간**: Near/Far Plane과 Depth 정밀도 관계, 투명 객체 처리, Z-Fighting 정의
3. **낮음**: 답변의 구체성 개선

**특별 주의사항:**
- Early-Z는 GPU 하드웨어 최적화 기법으로, Fragment Shader 실행 전 Depth Test를 수행하는 것입니다. 그리기 순서와는 무관합니다
- Depth Test와 Depth Write는 별개의 설정이며, 투명 객체에서는 보통 Test는 켜고 Write는 끕니다
- Depth 값은 비선형 분포이므로 near/far 비율이 클수록 정밀도 문제(Z-Fighting)가 발생하기 쉽습니다

